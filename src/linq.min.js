~function(e){function t(e,t){if(e instanceof Date&&t instanceof Date){return e.getTime()==t.getTime()}if(e instanceof Date!=t instanceof Date){return false}if(typeof e!==typeof t){return false}if(typeof e==="number"||typeof e==="string"){return e===t}if(typeof e==="undefined"){return true}for(var n in e){if(e[n]!==t[n]){return false}}return true}e.sum=function(e){var t=this;var n=0;for(var r=0;r<t.length;r++){n+=e(t[r])}return n};e.select=function(e){var t=this;var n=[];for(var r=0;r<t.length;r++){n.push(e(t[r]))}return n};e.selectMany=function(e){var t=this;var n=[];for(var r=0;r<t.length;r++){var i=e(t[r]);if(i.length){for(var s=0;s<i.length;s++){n.push(i[s])}}}return n};e.contains=function(e){var t=this;for(var n=0;n<t.length;n++){if(t[n]===e){return true}}return false};e.all=function(e){var t=this;var n=true;for(var r=0;r<t.length;r++){n=n&&e(t[r])}return n};e.any=function(e){if(e===undefined){return this.length>0}var t=this;for(var n=0;n<t.length;n++){if(e(t[n])){return true}}return false};e.where=function(e){var t=this;var n=[];for(var r=0;r<t.length;r++){if(e(t[r])){n.push(t[r])}}return n};e.first=function(e){if(e==null){return this.length>0?this[0]:null}var t=this,n=t.where(e);return n.length>0?n[0]:null};e.last=function(e){if(e==null){return this.length>0?this[this.length-1]:null}var t=this,n=t.where(e);return n.length>0?n[n.length-1]:null};e.distinct=function(){var e=this;var n=[];if(e.any()&&e.all(function(e){return e==null})){return[null]}for(var r=0;r<e.length;r++){var i=n.first(function(n){return t(n,e[r])});if(i===null){n.push(e[r])}}return n};e.groupBy=function(e){var n=this;var r=[];for(var i=0;i<n.length;i++){var s=r.first(function(r){return t(r.key,e(n[i]))});if(s===null){s=[];s.key=e(n[i]);r.push(s)}s.push(n[i])}return r};e.indexOf=e.indexOf||function(e){var t=this.length>>>0;var n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n);if(n<0){n+=t}for(;n<t;n++){if(n in this&&this[n]===e){return n}}return-1};e.getType=function(e){if(this.length==0)return"undefined";for(var t=0;t<this.length;t++){var n=typeof e(this[t]);if(n=="number")return"number";if(n=="string")return"string";if(n=="boolean")return"boolean";if(e(this[t])instanceof Date)return"Date"}return"undefined"};e.orderBy=function(e){if(this.length==0)return[];var t=this.getType(e);if(t=="number"){return this.sort(function(t,n){return e(t)-e(n)})}else if(t=="string"){return this.sort(function(t,n){var r=e(t)||"",i=e(n)||"";return r<i?-1:r>i?1:0})}else if(t=="boolean"){return this.sort(function(t,n){return e(t)==e(n)?1:-1})}else if(t=="Date"){return this.sort(function(t,n){return(e(t)||new Date(0)).getTime()-(e(n)||new Date(0)).getTime()})}else{return this}};e.orderByDescending=function(e){if(this.length==0)return[];var t=this.getType(e);if(t=="number"){return this.sort(function(t,n){return e(n)-e(t)})}else if(t=="string"){return this.sort(function(t,n){var r=e(n)||"",i=e(t)||"";return r<i?-1:r>i?1:0})}else if(t=="boolean"){return this.sort(function(t,n){return e(n)==e(t)?-1:1})}else if(t=="Date"){return this.sort(function(t,n){return(e(n)||new Date(0)).getTime()-(e(t)||new Date(0)).getTime()})}else{return this}};e.each=function(e){var t=this;for(var n=0;n<t.length;n++){e.bind(t[n],n,t[n])()}return t}}(Array.prototype)
