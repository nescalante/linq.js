!function(a){"use strict";function b(){function a(a){for(var b=0,c=0;c<s.length;c++)b+=a(s[c]);return b}function c(a){for(var c=[],d=0;d<s.length;d++)c.push(a(s[d]));return new b(c)}function d(a){for(var c=[],d=0;d<s.length;d++){var e=a(s[d]);if(e.length)for(var f=0;f<e.length;f++)c.push(e[f])}return new b(c)}function e(a){for(var b=0;b<s.length;b++)if(s[b]===a)return!0;return!1}function f(a){for(var b=!0,c=0;c<s.length;c++)b=b&&a(s[c]);return b}function g(a){if(void 0===a)return s.length>0;for(var b=0;b<s.length;b++)if(a(s[b]))return!0;return!1}function h(a){for(var c=[],d=0;d<s.length;d++)a(s[d])&&c.push(s[d]);return new b(c)}function i(a){if(null===a||void 0===a)return s.length>0?s[0]:null;var b=s.where(a);return b.length>0?b[0]:null}function j(a){if(null===a||void 0===a)return s.length>0?s[s.length-1]:null;var b=s.where(a);return b.length>0?b[b.length-1]:null}function k(){function a(a){return function(b){return r(b,s[a])}}var c=new b([]);if(s.any()&&s.all(function(a){return null===a||void 0===a}))return[null];for(var d=0;d<s.length;d++){var e=c.first(a(d));null===e&&c.push(s[d])}return c}function l(a){function c(b){return function(c){return r(c.key,a(s[b]))}}for(var d=new b([]),e=0;e<s.length;e++){var f=d.first(c(e));null===f&&(f=new b([]),f.key=a(s[e]),d.push(f)),f.push(s[e])}return d}function m(a){if(0===s.length)return"undefined";for(var b=0;b<s.length;b++){var c=typeof a(s[b]);if("number"==c)return"number";if("string"==c)return"string";if("boolean"==c)return"boolean";if(a(s[b])instanceof Date)return"Date"}return"undefined"}function n(a){if(0===s.length)return new b([]);var c,d=m(a);return c="number"==d?s.sort(function(b,c){return a(b)-a(c)}):"string"==d?s.sort(function(b,c){var d=a(b)||"",e=a(c)||"";return e>d?-1:d>e?1:0}):"boolean"==d?s.sort(function(b,c){return a(b)==a(c)?1:-1}):"Date"==d?s.sort(function(b,c){return(a(b)||new Date(0)).getTime()-(a(c)||new Date(0)).getTime()}):s,new b(c)}function o(a){if(0===s.length)return new b([]);var c,d=m(a);return c="number"==d?s.sort(function(b,c){return a(c)-a(b)}):"string"==d?s.sort(function(b,c){var d=a(c)||"",e=a(b)||"";return e>d?-1:d>e?1:0}):"boolean"==d?s.sort(function(b,c){return a(c)==a(b)?-1:1}):"Date"==d?s.sort(function(b,c){return(a(c)||new Date(0)).getTime()-(a(b)||new Date(0)).getTime()}):s,new b(c)}function p(a){for(var b=0;b<s.length;b++)a.bind(s[b],s[b],b)();return s}function q(){function a(c){for(var d=[],e=0;e<c.length;e++)d.push(c[e]instanceof b?a(c[e]):c[e]);return d}return a(s)}function r(a,b){if(a instanceof Date&&b instanceof Date)return a.getTime()==b.getTime();if(a instanceof Date!=b instanceof Date)return!1;if(typeof a!=typeof b)return!1;if("number"==typeof a||"string"==typeof a)return a===b;if("undefined"==typeof a)return!0;for(var c in a)if(a[c]!==b[c])return!1;for(var d in b)if(a[d]!==b[d])return!1;return!0}for(var s=this,t=0;t<arguments.length;t++)arguments[t]instanceof Array?s.push.apply(s,arguments[t]):s.push(arguments[t]);s.sum=a,s.select=c,s.selectMany=d,s.contains=e,s.all=f,s.any=g,s.where=h,s.first=i,s.last=j,s.distinct=k,s.groupBy=l,s.orderBy=n,s.orderByDescending=o,s.each=p,s.toArray=q}function c(a){function b(){}return b.prototype=a,new b}function d(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}var e;b.prototype=c(Array.prototype),e=function(){return d(b,arguments)},"undefined"!=typeof module&&module.exports?module.exports=e:a.va=e}(this);