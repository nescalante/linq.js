!function(a){"use strict";function b(){function a(a,c){return a instanceof b?new b(c):c}function c(b){for(var c=[],d=b;d<v.length;d++)d<v.length&&c.push(v[d]);return a(this,c)}function d(b){for(var c=[],d=0;b>d;d++)d<v.length&&c.push(v[d]);return a(this,c)}function e(a){for(var b=0,c=0;c<v.length;c++)b+=a?a(v[c]):v[c];return b}function f(b){for(var c=[],d=0;d<v.length;d++)c.push(b(v[d]));return a(this,c)}function g(b){for(var c=[],d=0;d<v.length;d++){var e=b(v[d]);if(e.length)for(var f=0;f<e.length;f++)c.push(e[f])}return a(this,c)}function h(a){for(var b=0;b<v.length;b++)if(v[b]===a)return!0;return!1}function i(a){for(var b=!0,c=0;c<v.length;c++)b=b&&a(v[c]);return b}function j(a){if(void 0===a)return v.length>0;for(var b=0;b<v.length;b++)if(a(v[b]))return!0;return!1}function k(b){for(var c=[],d=0;d<v.length;d++)b(v[d])&&c.push(v[d]);return a(this,c)}function l(a){if(null===a||void 0===a)return v.length>0?v[0]:null;var b=v.where(a);return b.length>0?b[0]:null}function m(a){if(null===a||void 0===a)return v.length>0?v[v.length-1]:null;var b=v.where(a);return b.length>0?b[b.length-1]:null}function n(){function a(a){return function(b){return u(b,v[a])}}var c=new b([]);if(v.any()&&v.all(function(a){return null===a||void 0===a}))return[null];for(var d=0;d<v.length;d++){var e=c.first(a(d));null===e&&c.push(v[d])}return this instanceof b?c:c.toArray()}function o(a){function c(b){return function(c){return u(c.key,a(v[b]))}}for(var d=new b([]),e=0;e<v.length;e++){var f=d.first(c(e));null===f&&(f=new b([]),f.key=a(v[e]),d.push(f)),f.push(v[e])}return this instanceof b?d:d.toArray()}function p(a){if(0===v.length)return"undefined";for(var b=0;b<v.length;b++){var c=typeof a(v[b]);if("number"==c)return"number";if("string"==c)return"string";if("boolean"==c)return"boolean";if(a(v[b])instanceof Date)return"Date"}return"undefined"}function q(b){if(0===v.length)return a(this,[]);var c,d=p(b);return c="number"==d?v.sort(function(a,c){return b(a)-b(c)}):"string"==d?v.sort(function(a,c){var d=b(a)||"",e=b(c)||"";return e>d?-1:d>e?1:0}):"boolean"==d?v.sort(function(a,c){return b(a)==b(c)?1:-1}):"Date"==d?v.sort(function(a,c){return(b(a)||new Date(0)).getTime()-(b(c)||new Date(0)).getTime()}):v,a(this,c)}function r(b){if(0===v.length)return a(this,[]);var c,d=p(b);return c="number"==d?v.sort(function(a,c){return b(c)-b(a)}):"string"==d?v.sort(function(a,c){var d=b(c)||"",e=b(a)||"";return e>d?-1:d>e?1:0}):"boolean"==d?v.sort(function(a,c){return b(c)==b(a)?-1:1}):"Date"==d?v.sort(function(a,c){return(b(c)||new Date(0)).getTime()-(b(a)||new Date(0)).getTime()}):v,a(this,c)}function s(a){for(var b=0;b<v.length;b++)a.bind(v[b],v[b],b)();return v}function t(){function a(c){for(var d=[],e=0;e<c.length;e++)d.push(c[e]instanceof b?a(c[e]):c[e]);return d}return a(v)}function u(a,b){if(a instanceof Date&&b instanceof Date)return a.getTime()==b.getTime();if(a instanceof Date!=b instanceof Date)return!1;if(typeof a!=typeof b)return!1;if("number"==typeof a||"string"==typeof a)return a===b;if("undefined"==typeof a)return!0;for(var c in a)if(a[c]!==b[c])return!1;for(var d in b)if(a[d]!==b[d])return!1;return!0}for(var v=this,w=0;w<arguments.length;w++)arguments[w]instanceof Array?v.push.apply(v,arguments[w]):v.push(arguments[w]);v.skip=c,v.take=d,v.sum=e,v.select=f,v.selectMany=g,v.contains=h,v.all=i,v.any=j,v.where=k,v.first=l,v.last=m,v.distinct=n,v.groupBy=o,v.orderBy=q,v.orderByDescending=r,v.forEach=s,v.toArray=t}function c(a){f(g).forEach(function(b){a.prototype[b]=a.prototype[b]||function(){var a=Array.prototype.slice.call(arguments);return f(this)[b].apply(this,a)}})}function d(a){function b(){}return b.prototype=a,new b}function e(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}var f,g=["skip","take","sum","select","selectMany","contains","all","any","where","first","last","distinct","groupBy","orderBy","orderByDescending","forEach"];b.prototype=d(Array.prototype),f=function(){return e(b,arguments)},f.extends=c,"undefined"!=typeof module&&module.exports?module.exports=f:a.va=f}(this);