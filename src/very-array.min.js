!function(a){"use strict";function b(){function a(a,c){return a instanceof b?new b(c):c}function c(a){for(var b=0,c=0;c<t.length;c++)b+=a&&a(t[c])||t[c];return b}function d(b){for(var c=[],d=0;d<t.length;d++)c.push(b(t[d]));return a(this,c)}function e(b){for(var c=[],d=0;d<t.length;d++){var e=b(t[d]);if(e.length)for(var f=0;f<e.length;f++)c.push(e[f])}return a(this,c)}function f(a){for(var b=0;b<t.length;b++)if(t[b]===a)return!0;return!1}function g(a){for(var b=!0,c=0;c<t.length;c++)b=b&&a(t[c]);return b}function h(a){if(void 0===a)return t.length>0;for(var b=0;b<t.length;b++)if(a(t[b]))return!0;return!1}function i(b){for(var c=[],d=0;d<t.length;d++)b(t[d])&&c.push(t[d]);return a(this,c)}function j(a){if(null===a||void 0===a)return t.length>0?t[0]:null;var b=t.where(a);return b.length>0?b[0]:null}function k(a){if(null===a||void 0===a)return t.length>0?t[t.length-1]:null;var b=t.where(a);return b.length>0?b[b.length-1]:null}function l(){function a(a){return function(b){return s(b,t[a])}}var c=new b([]);if(t.any()&&t.all(function(a){return null===a||void 0===a}))return[null];for(var d=0;d<t.length;d++){var e=c.first(a(d));null===e&&c.push(t[d])}return this instanceof b?c:c.toArray()}function m(a){function c(b){return function(c){return s(c.key,a(t[b]))}}for(var d=new b([]),e=0;e<t.length;e++){var f=d.first(c(e));null===f&&(f=new b([]),f.key=a(t[e]),d.push(f)),f.push(t[e])}return this instanceof b?d:d.toArray()}function n(a){if(0===t.length)return"undefined";for(var b=0;b<t.length;b++){var c=typeof a(t[b]);if("number"==c)return"number";if("string"==c)return"string";if("boolean"==c)return"boolean";if(a(t[b])instanceof Date)return"Date"}return"undefined"}function o(c){if(0===t.length)return new b([]);var d,e=n(c);return d="number"==e?t.sort(function(a,b){return c(a)-c(b)}):"string"==e?t.sort(function(a,b){var d=c(a)||"",e=c(b)||"";return e>d?-1:d>e?1:0}):"boolean"==e?t.sort(function(a,b){return c(a)==c(b)?1:-1}):"Date"==e?t.sort(function(a,b){return(c(a)||new Date(0)).getTime()-(c(b)||new Date(0)).getTime()}):t,a(this,d)}function p(c){if(0===t.length)return new b([]);var d,e=n(c);return d="number"==e?t.sort(function(a,b){return c(b)-c(a)}):"string"==e?t.sort(function(a,b){var d=c(b)||"",e=c(a)||"";return e>d?-1:d>e?1:0}):"boolean"==e?t.sort(function(a,b){return c(b)==c(a)?-1:1}):"Date"==e?t.sort(function(a,b){return(c(b)||new Date(0)).getTime()-(c(a)||new Date(0)).getTime()}):t,a(this,d)}function q(a){for(var b=0;b<t.length;b++)a.bind(t[b],t[b],b)();return t}function r(){function a(c){for(var d=[],e=0;e<c.length;e++)d.push(c[e]instanceof b?a(c[e]):c[e]);return d}return a(t)}function s(a,b){if(a instanceof Date&&b instanceof Date)return a.getTime()==b.getTime();if(a instanceof Date!=b instanceof Date)return!1;if(typeof a!=typeof b)return!1;if("number"==typeof a||"string"==typeof a)return a===b;if("undefined"==typeof a)return!0;for(var c in a)if(a[c]!==b[c])return!1;for(var d in b)if(a[d]!==b[d])return!1;return!0}for(var t=this,u=0;u<arguments.length;u++)arguments[u]instanceof Array?t.push.apply(t,arguments[u]):t.push(arguments[u]);t.sum=c,t.select=d,t.selectMany=e,t.contains=f,t.all=g,t.any=h,t.where=i,t.first=j,t.last=k,t.distinct=l,t.groupBy=m,t.orderBy=o,t.orderByDescending=p,t.forEach=q,t.toArray=r}function c(a){f(["sum","select","selectMany","contains","all","any","where","first","last","distinct","groupBy","orderBy","orderByDescending","forEach"]).forEach(function(b){a.prototype[b]=a.prototype[b]||function(){var a=Array.prototype.slice.call(arguments);return f(this)[b].apply(this,a)}})}function d(a){function b(){}return b.prototype=a,new b}function e(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}var f;b.prototype=d(Array.prototype),f=function(){return e(b,arguments)},f.extends=c,"undefined"!=typeof module&&module.exports?module.exports=f:a.va=f}(this);