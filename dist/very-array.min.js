!function(a,b){"use strict";function c(){function a(a,b){return a instanceof c?new c(b):b}function d(b){var c=[];0>b&&(b=0);for(var d=b;d<w.length;d++)d<w.length&&c.push(w[d]);return a(this,c)}function e(b){for(var c=[],d=0;b>d;d++)d<w.length&&c.push(w[d]);return a(this,c)}function f(a){for(var b=0,c=0;c<w.length;c++)b+=a?a(w[c]):w[c];return b}function g(b){for(var c=[],d=0;d<w.length;d++)c.push(b(w[d]));return a(this,c)}function h(b){for(var c=[],d=0;d<w.length;d++){var e=b(w[d]);if(e.length)for(var f=0;f<e.length;f++)c.push(e[f])}return a(this,c)}function i(a){for(var b=0;b<w.length;b++)if(w[b]===a)return!0;return!1}function j(a){for(var b=!0,c=0;c<w.length;c++)b=b&&a(w[c]);return b}function k(a){if(a===b)return w.length>0;for(var c=0;c<w.length;c++)if(a(w[c]))return!0;return!1}function l(b){for(var c=[],d=0;d<w.length;d++)b(w[d])&&c.push(w[d]);return a(this,c)}function m(a){if(null===a||a===b)return w.length>0?w[0]:null;var c=w.where(a);return c.length>0?c[0]:null}function n(a){if(null===a||a===b)return w.length>0?w[w.length-1]:null;var c=w.where(a);return c.length>0?c[c.length-1]:null}function o(){function a(a){return function(b){return v(b,w[a])}}var d=new c([]);if(w.any()&&w.all(function(a){return null===a||a===b}))return[null];for(var e=0;e<w.length;e++){var f=d.first(a(e));null===f&&d.push(w[e])}return this instanceof c?d:d.toArray()}function p(a){function b(b){return function(c){return v(c.key,a(w[b]))}}for(var d=new c([]),e=0;e<w.length;e++){var f=d.first(b(e));null===f&&(f=new c([]),f.key=a(w[e]),d.push(f)),f.push(w[e])}return this instanceof c?d:d.toArray()}function q(a){if(0===w.length)return"undefined";for(var b=0;b<w.length;b++){var c=typeof a(w[b]);if("number"==c)return"number";if("string"==c)return"string";if("boolean"==c)return"boolean";if(a(w[b])instanceof Date)return"Date"}return"undefined"}function r(c){if(0===w.length)return a(this,[]);var d,e=q(c);if(d="number"==e?w.sort(function(a,b){return c(a)===c(b)?0:null===c(a)?-1:null===c(b)?1:c(a)-c(b)}):"string"==e?w.sort(function(a,b){var d=c(a)||"",e=c(b)||"";return e>d?-1:d>e?1:0}):"boolean"==e?w.sort(function(a,b){return c(a)==c(b)?1:-1}):"Date"==e?w.sort(function(a,b){return(c(a)||new Date(0)).getTime()-(c(b)||new Date(0)).getTime()}):w,d.any(function(a){return c(a)===b})){for(var f=d.where(function(a){return c(a)!==b}),g=d.where(function(a){return c(a)===b}),h=0;h<g.length;h++)f.unshift(g[h]);d=f}return d}function s(c){if(0===w.length)return a(this,[]);var d,e=q(c);if(d="number"==e?w.sort(function(a,b){return c(a)===c(b)?0:null===c(a)?1:null===c(b)?-1:c(b)-c(a)}):"string"==e?w.sort(function(a,b){var d=c(b)||"",e=c(a)||"";return e>d?-1:d>e?1:0}):"boolean"==e?w.sort(function(a,b){return c(b)==c(a)?-1:1}):"Date"==e?w.sort(function(a,b){return(c(b)||new Date(0)).getTime()-(c(a)||new Date(0)).getTime()}):w,d.any(function(a){return c(a)===b})){for(var f=d.where(function(a){return c(a)!==b}),g=d.where(function(a){return c(a)===b}),h=0;h<g.length;h++)f.push(g[h]);d=f}return d}function t(a){for(var b=0;b<w.length;b++)a.bind(w[b],w[b],b)();return w}function u(){function a(b){for(var d=[],e=0;e<b.length;e++)d.push(b[e]instanceof c?a(b[e]):b[e]);return d}return a(w)}function v(a,b){if(a instanceof Date&&b instanceof Date)return a.getTime()==b.getTime();if(a instanceof Date!=b instanceof Date)return!1;if(typeof a!=typeof b)return!1;if("number"==typeof a||"string"==typeof a)return a===b;if("undefined"==typeof a)return!0;for(var c in a)if(a[c]!==b[c])return!1;for(var d in b)if(a[d]!==b[d])return!1;return!0}for(var w=this,x=0;x<arguments.length;x++)arguments[x]instanceof Array?w.push.apply(w,arguments[x]):w.push(arguments[x]);w.skip=d,w.take=e,w.sum=f,w.select=g,w.selectMany=h,w.contains=i,w.all=j,w.any=k,w.where=l,w.first=m,w.last=n,w.distinct=o,w.groupBy=p,w.orderBy=r,w.orderByDescending=s,w.forEach=t,w.toArray=u}function d(a){g(h).forEach(function(b){a.prototype[b]=a.prototype[b]||function(){var a=Array.prototype.slice.call(arguments);return g(this)[b].apply(this,a)}})}function e(a){function b(){}return b.prototype=a,new b}function f(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}var g,h=["skip","take","sum","select","selectMany","contains","all","any","where","first","last","distinct","groupBy","orderBy","orderByDescending","forEach"];c.prototype=e(Array.prototype),g=function(){return f(c,arguments)},g.extends=d,"undefined"!=typeof module&&module.exports?module.exports=g:a.va=g}(this);