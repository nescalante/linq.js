!function(a,b){"use strict";function c(){function a(a,b){return a instanceof c?new c(b):b}function d(b){var c=[];0>b&&(b=0);for(var d=b;d<x.length;d++)d<x.length&&c.push(x[d]);return a(this,c)}function e(b){for(var c=[],d=0;b>d;d++)d<x.length&&c.push(x[d]);return a(this,c)}function f(a){for(var b=0,c=0;c<x.length;c++)b+=a?a(x[c]):x[c];return b}function g(b){for(var c=[],d=0;d<x.length;d++)c.push(b(x[d]));return a(this,c)}function h(b){for(var c=[],d=0;d<x.length;d++){var e=b(x[d]);if(e.length)for(var f=0;f<e.length;f++)c.push(e[f])}return a(this,c)}function i(a){for(var b=0;b<x.length;b++)if(x[b]===a)return!0;return!1}function j(a){for(var b=!0,c=0;c<x.length;c++)b=b&&a(x[c]);return b}function k(a){if(a===b)return x.length>0;for(var c=0;c<x.length;c++)if(a(x[c]))return!0;return!1}function l(b){for(var c=[],d=0;d<x.length;d++)b(x[d])&&c.push(x[d]);return a(this,c)}function m(a){if(null===a||a===b)return x.length>0?x[0]:null;var c=x.where(a);return c.length>0?c[0]:null}function n(a){if(null===a||a===b)return x.length>0?x[x.length-1]:null;var c=x.where(a);return c.length>0?c[c.length-1]:null}function o(){function a(a){return function(b){return w(b,x[a])}}var d=new c([]);if(x.any()&&x.all(function(a){return null===a||a===b}))return[null];for(var e=0;e<x.length;e++){var f=d.first(a(e));null===f&&d.push(x[e])}return this instanceof c?d:d.toArray()}function p(a){function b(b){return function(c){return w(c.key,a(x[b]))}}for(var d=new c([]),e=0;e<x.length;e++){var f=d.first(b(e));null===f&&(f=new c([]),f.key=a(x[e]),d.push(f)),f.push(x[e])}return this instanceof c?d:d.toArray()}function q(a){if(0===x.length)return"undefined";for(var b=0;b<x.length;b++){var c=typeof a(x[b]);if("number"==c)return"number";if("string"==c)return"string";if("boolean"==c)return"boolean";if(a(x[b])instanceof Date)return"Date"}return"undefined"}function r(c){if(0===x.length)return a(this,[]);var d,e=q(c);if(d="number"==e?x.sort(function(a,b){return c(a)===c(b)?0:null===c(a)?-1:null===c(b)?1:c(a)-c(b)}):"string"==e?x.sort(function(a,b){var d=c(a)||"",e=c(b)||"";return e>d?-1:d>e?1:0}):"boolean"==e?x.sort(function(a,b){return c(a)==c(b)?1:-1}):"Date"==e?x.sort(function(a,b){return(c(a)||new Date(0)).getTime()-(c(b)||new Date(0)).getTime()}):x,d.any(function(a){return c(a)===b})){for(var f=d.where(function(a){return c(a)!==b}),g=d.where(function(a){return c(a)===b}),h=0;h<g.length;h++)f.unshift(g[h]);d=f}return d}function s(c){if(0===x.length)return a(this,[]);var d,e=q(c);if(d="number"==e?x.sort(function(a,b){return c(a)===c(b)?0:null===c(a)?1:null===c(b)?-1:c(b)-c(a)}):"string"==e?x.sort(function(a,b){var d=c(b)||"",e=c(a)||"";return e>d?-1:d>e?1:0}):"boolean"==e?x.sort(function(a,b){return c(b)==c(a)?-1:1}):"Date"==e?x.sort(function(a,b){return(c(b)||new Date(0)).getTime()-(c(a)||new Date(0)).getTime()}):x,d.any(function(a){return c(a)===b})){for(var f=d.where(function(a){return c(a)!==b}),g=d.where(function(a){return c(a)===b}),h=0;h<g.length;h++)f.push(g[h]);d=f}return d}function t(a){for(var b=0;b<x.length;b++)a.bind(x[b],x[b],b)();return x}function u(){function a(b){for(var d=[],e=0;e<b.length;e++)d.push(b[e]instanceof c?a(b[e]):b[e]);return d}return a(x)}function v(){function a(d){var e={};d.key!==b&&(e.key=d.key);for(var f=0;f<d.length;f++)e[f]=d[f]instanceof c?a(d[f]):d[f];return e}return a(x)}function w(a,b){if(a instanceof Date&&b instanceof Date)return a.getTime()==b.getTime();if(a instanceof Date!=b instanceof Date)return!1;if(typeof a!=typeof b)return!1;if("number"==typeof a||"string"==typeof a)return a===b;if("undefined"==typeof a)return!0;for(var c in a)if(a[c]!==b[c])return!1;for(var d in b)if(a[d]!==b[d])return!1;return!0}for(var x=this,y=0;y<arguments.length;y++)arguments[y]instanceof Array?x.push.apply(x,arguments[y]):x.push(arguments[y]);x.skip=d,x.take=e,x.sum=f,x.select=g,x.selectMany=h,x.contains=i,x.all=j,x.any=k,x.where=l,x.first=m,x.last=n,x.distinct=o,x.groupBy=p,x.orderBy=r,x.orderByDescending=s,x.forEach=t,x.toArray=u,x.toJSON=v}function d(a){g(h).forEach(function(b){a.prototype[b]=a.prototype[b]||function(){var a=Array.prototype.slice.call(arguments);return g(this)[b].apply(this,a)}})}function e(a){function b(){}return b.prototype=a,new b}function f(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}var g,h=["skip","take","sum","select","selectMany","contains","all","any","where","first","last","distinct","groupBy","orderBy","orderByDescending","forEach"];c.prototype=e(Array.prototype),g=function(){return f(c,arguments)},g.extends=d,"undefined"!=typeof module&&module.exports?module.exports=g:a.va=g}(this);